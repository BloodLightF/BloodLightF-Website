<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个人评价 - BloodLightF的个人主页</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .evaluation-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .evaluation-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }
        
        .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .skill-item {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .skill-name {
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .skill-level {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .skill-progress {
            height: 100%;
            background: #3498db;
        }
        
        .edit-mode {
            display: none;
            margin-top: 20px;
        }
        
        .form-input {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        textarea.form-input {
            min-height: 100px;
            resize: vertical;
        }
        
        .edit-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .save-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html">弦月初十的主页</a>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link"><i class="fas fa-home"></i> 首页</a>
                <a href="education.html" class="nav-link"><i class="fas fa-graduation-cap"></i> 个人学历</a>
                <a href="gallery.html" class="nav-link"><i class="fas fa-images"></i> 绘图合集</a>
                <a href="evaluation.html" class="nav-link active"><i class="fas fa-star"></i> 个人评价</a>
                <a href="resources.html" class="nav-link"><i class="fas fa-file-alt"></i> 文件资源</a>
                <a href="links.html" class="nav-link"><i class="fas fa-link"></i> 网页链接</a>
                <a href="admin.html" class="nav-link admin-btn"><i class="fas fa-cog"></i> 管理</a>
            </div>
        </div>
    </nav>

    <!-- 主要内容 -->
    <main class="main-content">
        <div class="container">
            <h1>个人评价</h1>
            
            <div class="evaluation-container">
                <!-- 自我评价部分 -->
                <section class="evaluation-section">
                    <h2>自我评价</h2>
                    <p id="self-evaluation">10分太张扬，9分太baka，只好给自己114514分力（智将）。</p>
                    
                    <div class="edit-mode" id="edit-self-eval">
                        <textarea id="edit-self-eval-text" class="form-input"></textarea>
                        <button class="save-btn" onclick="saveSelfEvaluation()">保存</button>
                    </div>
                    
                    <button class="edit-btn" onclick="toggleEdit('self-eval')" id="btn-self-eval">编辑</button>
                </section>
                
                <!-- 技能评价部分 -->
                <section class="evaluation-section">
                    <h2>技能评价</h2>
                    <div class="skills-grid">
                        <div class="skill-item">
                            <div class="skill-name">HTML/CSS</div>
                            <div class="skill-level">
                                <div class="skill-progress" style="width: 9%"></div>
                            </div>
                            <div>9%</div>
                        </div>
                        <div class="skill-item">
                            <div class="skill-name">C/C++</div>
                            <div class="skill-level">
                                <div class="skill-progress" style="width: 81%"></div>
                            </div>
                            <div>81%</div>
                        </div>
                        <div class="skill-item">
                            <div class="skill-name">Python</div>
                            <div class="skill-level">
                                <div class="skill-progress" style="width: 1%"></div>
                            </div>
                            <div>1%</div>
                        </div>
                        <div class="skill-item">
                            <div class="skill-name">Java</div>
                            <div class="skill-level">
                                <div class="skill-progress" style="width: 9%"></div>
                            </div>
                            <div>9%</div>
                        </div>
                    </div>
                    
                    <div class="edit-mode" id="edit-skills">
                        <p>技能编辑功能需要更多开发。目前不可以修改。</p>
                    </div>
                    
                    <button class="edit-btn" onclick="toggleEdit('skills')" id="btn-skills">编辑技能</button>
                </section>
                
                <!-- 职业目标部分 -->
                <section class="evaluation-section">
                    <h2>职业目标</h2>
                    <p id="career-goals">短期目标：躺平。
                    <br>长期目标：退休爽拿五险一金。</p>
                    
                    <div class="edit-mode" id="edit-career-goals">
                        <textarea id="edit-career-goals-text" class="form-input"></textarea>
                        <button class="save-btn" onclick="saveCareerGoals()">保存</button>
                    </div>
                    
                    <button class="edit-btn" onclick="toggleEdit('career-goals')" id="btn-career-goals">编辑</button>
                </section>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 来不及解释了！都去看350235.</p>
        </div>
    </footer>

    <script>
        // 检查URL参数，判断是否进入编辑模式
        const urlParams = new URLSearchParams(window.location.search);
        const editMode = urlParams.get('edit');
        
        if (editMode === 'true' && localStorage.getItem('adminLoggedIn') === 'true') {
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.style.display = 'inline-block';
            });
        } else {
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.style.display = 'none';
            });
        }
        
        // 加载评价数据
        document.addEventListener('DOMContentLoaded', function() {
            loadEvaluationData();
        });
        
        function loadEvaluationData() {
            const evaluationData = JSON.parse(localStorage.getItem('evaluationData') || '{}');
            
            if (evaluationData.selfEvaluation) {
                document.getElementById('self-evaluation').textContent = evaluationData.selfEvaluation;
            }
            
            if (evaluationData.careerGoals) {
                document.getElementById('career-goals').textContent = evaluationData.careerGoals;
            }
        }
        
        function toggleEdit(section) {
            const editDiv = document.getElementById(`edit-${section}`);
            const isEditing = editDiv.style.display === 'block';
            
            if (isEditing) {
                editDiv.style.display = 'none';
                document.getElementById(`btn-${section}`).textContent = `编辑${getSectionName(section)}`;
            } else {
                // 填充当前值到编辑框
                if (section === 'self-eval') {
                    document.getElementById('edit-self-eval-text').value = document.getElementById('self-evaluation').textContent;
                } else if (section === 'career-goals') {
                    document.getElementById('edit-career-goals-text').value = document.getElementById('career-goals').textContent;
                }
                
                editDiv.style.display = 'block';
                document.getElementById(`btn-${section}`).textContent = '取消';
            }
        }
        
        function getSectionName(section) {
            const names = {
                'self-eval': '自我评价',
                'skills': '技能',
                'career-goals': '职业目标'
            };
            return names[section] || '';
        }
        
        function saveSelfEvaluation() {
            const evaluationData = JSON.parse(localStorage.getItem('evaluationData') || '{}');
            evaluationData.selfEvaluation = document.getElementById('edit-self-eval-text').value;
            localStorage.setItem('evaluationData', JSON.stringify(evaluationData));
            
            document.getElementById('self-evaluation').textContent = evaluationData.selfEvaluation;
            toggleEdit('self-eval');
            alert('自我评价已保存！');
        }
        
        function saveCareerGoals() {
            const evaluationData = JSON.parse(localStorage.getItem('evaluationData') || '{}');
            evaluationData.careerGoals = document.getElementById('edit-career-goals-text').value;
            localStorage.setItem('evaluationData', JSON.stringify(evaluationData));
            
            document.getElementById('career-goals').textContent = evaluationData.careerGoals;
            toggleEdit('career-goals');
            alert('职业目标已保存！');
        }
    </script>
</body>
</html>